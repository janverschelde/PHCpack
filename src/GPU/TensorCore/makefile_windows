# This makefile is for the command line version
# of the Microsoft Visual Studio Compiler on Windows 10.
# The option '-O3' is unknown and replaced by '-O2'.

# location of the command line Microsoft Visual Studio Compiler
# CL="C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.25.28610\bin\Hostx64\x64"
CL="C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.36.32532\bin\Hostx64\x64"

# include path for the Microsoft Visual Studio Compiler
# includepath="C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.25.28610\include"
includepath="C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.36.32532\include"

# include path for the Windows Kit
# winkitucrt="C:\Program Files (x86)\Windows Kits\10\Include\10.0.18362.0\ucrt"
winkitucrt="C:\Program Files (x86)\Windows Kits\10\Include\10.0.22000.0\ucrt"

# libaries of the Microsoft Visual Studio compiler
# libdirvs="C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.25.28610\lib\x64"
libdirvs="C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.36.32532\lib\x64"

# libraries of the Windows Kits
# libdirkitum="C:\Program Files (x86)\Windows Kits\10\Lib\10.0.18362.0\um\x64"
# libdirkitucrt="C:\Program Files (x86)\Windows Kits\10\Lib\10.0.18362.0\ucrt\x64"
libdirkitum="C:\Program Files (x86)\Windows Kits\10\Lib\10.0.22000.0\um\x64"
libdirkitucrt="C:\Program Files (x86)\Windows Kits\10\Lib\10.0.22000.0\ucrt\x64"

# include files of the CUDA SDK
# CUDASDK="C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2"
CUDASDK="C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1"
# library folder of the CUDA SDK
# CUDALIB="C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2\lib\x64"
CUDALIB="C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1\lib\x64"

smTCGemm:
	nvcc -ccbin=$(CL) -O2 -o smTCGemm -arch=sm_89 simpleTensorCoreGemm.cu

pi64bits:
	gcc -o pi64bits bits_of_pi.c

test_split:
	@-echo "compiling ..."
	g++ -c splitting_doubles.cpp -o splitting_doubles.o
	g++ -c test_splitting_doubles.cpp -o test_splitting_doubles.o
	@-echo "linking ..."
	g++ -o test_split test_splitting_doubles.o splitting_doubles.o

clean:
	del smTCGemm.exe smTCGemm.lib smTCGemm.exp
	del pi64bits.exe
	del test_split.exe splitting_doubles.o test_splitting_doubles.o
